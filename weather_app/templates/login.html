<!-- contains html shared between both routes (template inheritance) -->
<!DOCTYPE html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
   
    <!-- url_for is a flask function that finds the exact location of a route  -->
    <!-- stylesheet is linking to main.css file in the static folder-->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}"> 
    
</head>
<body>
    <header class="site-header">
        <!-- navigation bar -->
        <!-- bootstrap classes, and makes format responsive (resizes appropriately) -->
        <div class="navbar navbar-dark bg-dark">
            <span class="navbar-brand mb-0 h1 ">
                How's the Weather?
            </span>
            <div class="navbar-nav">
                <!-- if user is logged in, display logout route -->
                {% if current_user.is_authenticated %}
                    <a class="nav-item nav-link" href="{{ url_for('logout') }}">Logout</a>
                {% else %}
                    <a class="nav-item nav-link" href="{{ url_for('login') }}">Login</a>
                    <a class="nav-item nav-link" href="{{ url_for('register') }}">Register</a>
                {% endif %}
            </div>
        </div>
    </header>
    
    <main role="main" class="container">
        <div class="row">
            <div class="col-md-8">
                <!-- function to get and output flashed messages that are sent to this template -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    <!-- if messages is not empty = there are flashed messages to display-->
                    {% if messages %}
                        <!-- get two values from each message -->
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}"> <!-- category = 'success' for registration-->
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
                <!-- content block, allows child templates to override with data that they send in-->
                {% block content %}
                <div class="content-section"> <!-- a style from main.css -->
                    <form method="POST" action=""> <!-- when we post this form it's going to post to the same route that we are currently on -->
                        {{ form.hidden_tag() }} <!-- for added protection -->
                        <fieldset class="form-group"> <!-- bootstrap -->
                            <!-- legend for registration form (from forms.py) -->
                            <legend class="border-bottom mb-4">Log In</legend>
            
                            <!-- email -->
                            <div class="form-group">
                                {{ form.email.label(class="form-control-label") }} <!-- label, where we use fields from our form that was passed in-->
                                <!-- if the form has errors (e.g. invalid input) -->
                                {% if form.email.errors %}
                                    <!-- print out error form field -->
                                    {{ form.email(class="form-control form-control-lg is-invalid") }} 
                                    <div class="invalid-feedback">
                                        {% for error in form.email.errors %}
                                            <!-- print out the error variable -->
                                            <span> {{ error }}</span>
                                        {% endfor%}
                                    </div>
                                <!-- else if valid print out valid field-->
                                {% else %}
                                    {{ form.email(class="form-control form-control-lg") }} 
                                {% endif %} 
                            </div>
            
                            <!-- password -->
                            <div class="form-group">
                                {{ form.password.label(class="form-control-label") }} <!-- where we use fields from our form that was passed in-->
                                <!-- if the form has errors (e.g. invalid input) -->
                                {% if form.password.errors %}
                                    <!-- print out error form field -->
                                    {{ form.password(class="form-control form-control-lg is-invalid") }} 
                                    <div class="invalid-feedback">
                                        {% for error in form.password.errors %}
                                            <!-- print out the error variable -->
                                            <span> {{ error }}</span>
                                        {% endfor%}
                                    </div>
                                <!-- else if valid print out valid field-->
                                {% else %}
                                    {{ form.password(class="form-control form-control-lg") }} 
                                {% endif %}
                            </div>
                            <!-- remember me, bootstrap class = checkbox -->
                            <div class="form-check">
                                {{ form.remember(class="form-check-input") }} <!-- field-->
                                {{ form.remember.label(class="form-check-label") }} <!-- label-->
                            </div>
                        </fieldset>
            
                        <!-- submit button -->
                        <div class="form-group">
                            {{ form.submit(class="btn btn-outline-info")}}
                        </div>
            
                        <!-- forgot password, muted text (visual) and margin from left of 2 -->
                        <small class="text-muted ml-2">
                            <a href="#">Forgot Password?</a>
                        </small>
                    </form>
                </div>
                <!-- Need an account? -->
                <div class="border-top pt-3">
                    <small class="text-muted">
                        <!-- value we pass into the url_for function is the name of the route function, not route itself -->
                        Need an Account? <a class="ml-2" href="{{ url_for('register') }}">Sign Up Now</a> <!-- anchor tag for a link to the login page, margin left of 2-->
                    </small>
                </div>
                {% endblock %}
            </div>
        </div>
    </main>
</body>

</html>